# WireGuard模块端配置文件
# 部署路径: /etc/wireguard/wg0.conf
# 使用前请替换所有占位符

[Interface]
# 模块端私钥 - 使用 wg genkey 生成
PrivateKey = {{MODULE_PRIVATE_KEY}}

# 模块端在VPN网段的IP地址
Address = 10.8.0.2/32

# DNS服务器 (可选，用于域名解析)
DNS = 8.8.8.8, 8.8.4.4

# 网络接口名称 (根据实际情况调整)
# 常见的有: eth0, ens3, enp0s3, wlan0
# 启动后配置路由和NAT，实现内网穿透
PostUp = iptables -A FORWARD -i wg0 -j ACCEPT; iptables -A FORWARD -o wg0 -j ACCEPT; iptables -t nat -A POSTROUTING -o {{NETWORK_INTERFACE}} -j MASQUERADE
PostDown = iptables -D FORWARD -i wg0 -j ACCEPT; iptables -D FORWARD -o wg0 -j ACCEPT; iptables -t nat -D POSTROUTING -o {{NETWORK_INTERFACE}} -j MASQUERADE

[Peer]
# 服务端公钥
PublicKey = {{SERVER_PUBLIC_KEY}}

# 服务端地址和端口 (替换为实际的公网IP或域名)
Endpoint = {{SERVER_PUBLIC_IP}}:51820

# 允许的IP范围 (VPN网段，用于接收VPN流量)
AllowedIPs = 10.8.0.0/24

# 保持连接活跃 (重要：确保NAT不会断开连接)
PersistentKeepalive = 25 